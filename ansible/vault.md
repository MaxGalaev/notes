Чтобы зашифровать строку с секретом используется команда:
ansible-vault encrypt_string --vault-id @prompt my_very_long_password, где
my_very_long_password - строка с секретом внутри нашего ямла. 

Пример:

api_host: "pve.home.lab"
api_user: "root@pam"
api_token_id: "ansible"
api_token_secret: "502c98c6-adab-4afd-a26b-8b9297b110b8"

В результате получится строка:
!vault |
          $ANSIBLE_VAULT;1.1;AES256
          64636139636132386636393837353238313464393335373266356561646136383166643232653230
          3530336665656538663338633139313131313036343936610a333430383236643066363164393965
          37613032323366363439653531353238663363303636663032356162656539326463386335613931
          3165376264666533330a663765326366356663623932313530653036333031626439346238386131
          64613230346262353461663438386132313536316365323738386438616130643233373366383862
          6464393663383539626134353532666537663763383461393332

Меняем наш секрет в ямле на эту строчку. Получается:

api_host: "pve.home.lab"
api_user: "root@pam"
api_token_id: "ansible"
api_token_secret: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          64636139636132386636393837353238313464393335373266356561646136383166643232653230
          3530336665656538663338633139313131313036343936610a333430383236643066363164393965
          37613032323366363439653531353238663363303636663032356162656539326463386335613931
          3165376264666533330a663765326366356663623932313530653036333031626439346238386131
          64613230346262353461663438386132313536316365323738386438616130643233373366383862
          6464393663383539626134353532666537663763383461393332

Запускать плейбук нужно вот так, с параметром --vault-id @prompt: 

ansible-playbook -i hosts.yml pve_create_vm.yml --vault-id @prompt

Вместо ввода пароля можно использовать секретный файл с паролем, но его тоже нужно безопасно хранить.
Лучше всего в менеджере паролей. В тестовой конфигурации не вижу смысла это делать.

