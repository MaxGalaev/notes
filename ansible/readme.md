## Основные понятия

1) Task - это описание действия которое нужно выполнить

2) Play - это связь между группами хостов и тасками(ролями), т.е. где что выполнять.

3) Playbook - это набор play-ев.

Правильный playbook:
---
- hosts: group1
  roles:
    - role1

- hosts: group2,group3
  tasks:
    - debug:

4) Роль - нужна для раскладывания кода по папочкам и для задания дефолтных значений(самый низкий приоритет). 

Когда делать таски а когда роли? Таски в плейбуке чаще всего используются либо как "клей" до/после ролей, 
либо как самостоятельный строительный элемент (тогда в коде не должно быть ролей). 
Груда нормальных тасок в перемешку с ролями — это однозначная неряшливость. 
Следует придерживаться конкретного стиля — либо таски, либо роли. Если нужно использовать таски вместе с ролями, то используют pre_tasks и post_tasks в плейбуке.
Роли дают разделение сущностей и дефолты, таски позволяют прочитать код быстрее. 
Обычно в роли выносят более "стационарный" (важный и сложный) код, а в стиле тасок пишут вспомогательные скрипты.  

Для проверки какие таски на каких хостах будут запускаться, можно при запуске ansible-playbook использовать параметры:
--list-hosts
--list-tasks
