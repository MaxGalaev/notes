### Общие принципы
`Pod` это минимальный объект `kubernetes` который запускается в кластере. `Pod` состоит из одного или нескольких контейнеров. Как правило из одного. 
Ссылка на [`api`](https://kubernetes.io/docs/reference/kubernetes-api/workload-resources/pod-v1/)
### Манифест
Любые объекты `kubernetes` лучше создавать через `yaml` манифесты. Для `pod` манифест будет выглядеть так:
```yml
apiVersion: v1
kind: Pod
metadata:
  name: my-first-pod # обязательно
  namespace: work
  labels:
    app: nginx
    version: 1.27.5
spec:
  containers:
  - name: nginx # имя контейнера внутри пода
    image: nginx:1.27.5
    ports:
      - containerPort: 80
    resources:
      requests:
        memory: "64Mi"
        cpu: "250m"
      limits:
        memory: "128Mi"
        cpu: "500m"
    livenessProbe:
      tcpSocket:
        port: 80
      initialDelaySeconds: 15
      periodSeconds: 10
    readinessProbe:
      tcpSocket:
        port: 80
      initialDelaySeconds: 15
      periodSeconds: 10
```

Состояния `Pod`:
- `Pending` - один или несколько контейнеров внутри пода еще не готовы;
- `Running` - все контейнеры успешно запущены;
- `Succeeded` - все контейнеры успешно завершены и не будут запущены снова;
- `Failed` - все контейнеры завершены, но как минимум один завершился с ошибкой;
- `unknown` - состояние пода невозможно определить. Когда недоступен `Kubernetes API` например из-зи проблем в сети; 

### Labels
Метки - это пары ключ:значение, которыми можно пометить любой объект кубера, чтобы потом выбирать эти объекты с помощью селекторов

### Probes
Пробы нужны чтобы проверять состояние приложения. Т.е. кубер попытается каким-то способом проверить состояние вашего приложения. В идеале, приложение должно иметь специальный `endpoint` куда можно обратиться и узнать текущее состояние. 

В общем, есть 4 механизма проверок:
- `exec` - выполнение команды внутри контейнера и считывание кода возврата. (0 - успех, не 0 - ошибка )
- `tcpSocket` - отправка `TCP`- запроса на указанный порт. Если соединение установлено, то успех
- `httpGet` - выполнение `HTTP`- запроса по указанному пути и порту. (Успех - код возврата 200-399)
- `grpc` - использование этого протокола для проверки.

Каждая проба возвращает `Success`, `Failure` или `Unknown`

Существуют 3 типа проб:
- `livenessProbe` -  определяет работает ли контейнер. `Kubelet` убивает контейнер если проба не прошла, дальнейшая его судьба зависит от политики `restartPolicy`.
- `readinessProbe` - проверяет готов ли ваш контейнер отвечать по сети. Если проба не возвращает успех, то контроллер `EndpointSlice` удаляет `ip`-адрес модуля из `EndpointSlice` всех сервисов, соотвествующих модулю. Если это проба не определена, то всегда возвращается `Success`
- `startupProbe` - проверка для долгостартующих приложений. Пока она не пройдет, другие проверки не запускаются. Если она возвращает не успех, то работа контейнера завершается, дальнейшая его судьба зависит от политики `restartPolicy`. Если это проба не определена, то всегда возвращается `Success`